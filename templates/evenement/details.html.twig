{% extends 'base.html.twig' %}


{% block body %}






<div class="containerEelmentsDetails">
    <div class="titleEvenement">
        <h1>{{ evenement.nom }}</h1>
    </div>
    <div class="disreption">
        <img src="{{asset ('images/evenement/'~ evenement.image) }}" alt="">

        <span>{{ evenement.description }} </span>
    </div>

    <div class="info">
        <strong>Référence : {{ createur.email }}</strong>
        <strong> du : {{ evenement.dateDebut | date('y-m-d H:i') }}</strong>
        <strong> au : {{ evenement.dateFin | date('y-m-d H:i') }} </strong>
    </div>
</div>


{% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}

{% set link = '<a href="' ~ path('add_participant', {'id': evenement.id}) ~ '">participer</a>' %}
    {% for participant in evenement.participant %}
        {% if participant.id == app.user.id %}
        {% set link = 'vous etes inscrits' %}
        {% endif %}
    {% endfor %}
{% else %}
{% set link =  'pour participer <a href="' ~ path('app_login') ~ '">Connectez-vous</a>' %}
{% endif %}
{{ link | raw}}


<div class="espaceCommentaire">
    <strong>Laissez un commentaire :</strong>
    {% for message in app.flashes('success') %}
    {{ message }}
    {% endfor %}

    <div class="commentaires">

        {% for commentaire in commentaires %}
        <span>{{ commentaire.utilisateur.pseudo }}</span>
        <div class="cmmentaireEtSupprimer">
            <span class="commentaire"> {{ commentaire }} </span>
            {% if commentaire.utilisateur == app.user %}
            <a href="{{ path('supprimer_commentaire',{'id':commentaire.id})}}"><i class="fa-solid fa-trash"></i></a>
            <a
                href="{{ path('edit_commentaire',{'idEvent':commentaire.evenement.id ,'idCommentaire':commentaire.id})}}"><i
                    class="fa-sharp fa-solid fa-pen-to-square"></i></a>
            {% endif %}
        </div>
        {% endfor %}
    </div>

    <div class="ecrireUnCommentaire">
        {{form_start( formAddCommentaire) }}
        {{ form_row(formAddCommentaire.text, {'label': false,'attr': {'placeholder': 'Ajouter un commentaire'}})
        }}
        <span>
            {{form_row( formAddCommentaire.submit) }}
        </span>
        {{form_end( formAddCommentaire) }}
    </div>
</div>


</div>

{% endblock %}